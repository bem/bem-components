block('input')(
    tag()('span'),

    js()(true),

    def()(function() {
        var ctx = this.ctx,
            val = ctx.val;

        val == null && (val = '');

        ctx.val = this._.isSimple(val)? val : BEMHTML.apply(val);
        ctx.id = ctx.id || this.generateId();
        applyNext({ _input: ctx });
    }),

    content()(function() {
        var ctx = this.ctx, content = [{ elem: 'control' }];
        // NOTE: не вынесли в отдельные шаблоны ради оптимизации
        ctx.hint && content.unshift({ elem: 'hint', content: ctx.hint });
        ctx.label && content.unshift({ elem: 'label', content: ctx.label });
        ctx.messages && content.push(ctx.messages);
        ctx.samples && content.push({ elem: 'samples', samples: ctx.samples });
        return content;
    })
)
